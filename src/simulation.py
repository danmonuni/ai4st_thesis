# simulation utilities, from step components up to a full simulation